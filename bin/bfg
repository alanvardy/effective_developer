#!/usr/bin/env ruby

# Helper script to call BFG Repo Cleaner

class BFGRepoCleaner
  def execute!(args)
    puts `java -jar #{File.dirname(__FILE__)}/../vendor/bfg-1.12.12.jar #{args.join(' ')}`

    if args.length < 2 || args.none? { |argv| argv == '--delete-files' || argv == '--replace-text' }
      puts
      puts('Invalid arguments passed to bfg.  Expected usage:')
      puts('bfg --delete-files YOUR-FILE-WITH-SENSITIVE-DATA')
      puts('bfg --replace-text passwords.txt')
    end
  end
end

BFGRepoCleaner.new().execute!(ARGV)
